

# SafeDraft 使用手册 (v1.1 修正版)

**核心理念**：无感记录、瞬间回溯、永不丢失。

## 1. 产品简介

SafeDraft 是一款系统级输入保险箱。它在后台实时记录您的每一次键盘输入，通过毫秒级本地持久化技术，确保在软件崩溃、系统闪退或断电时，您的文字依然安全。

## 2. 界面功能分区

* **主输入区**：支持实时自动保存的 Markdown 编辑器。
* **顶部工具栏**：
* `➕ 新建`：多窗口并行输入，所有窗口共享同一个数据库连接。
* `💾 保存`：将当前内容创建历史快照并清空界面。
* `☁️⬆️/⬇️`：（需配置）与远程服务器同步数据库。
* `⚙️ 设置`：管理感知规则、主题（Deep/Light）及透明度。
* `📌 状态灯`：蓝色表示手动锁定置顶；橙色表示智能弹出后的 2 分钟临时置顶。


* **右侧入口**：
* `📓 笔记`：进入专业笔记管理系统。
* `🕒 历史归档`：进入“时光机”数据恢复中心。



## 3. 核心进阶功能

### 3.1 📂 笔记管理系统 (Notebook)

代码现已包含完整的三栏式笔记库：

* **文件夹管理**：支持创建、重命名文件夹，并可选择在删除文件夹时保留或清理内部笔记。
* **双向联动**：在“时光机”中发现有价值的片段，可点击 `⭐ 存笔记` 直接转存至指定目录。
* **安全回收站**：删除的笔记会进入回收站，支持一键还原或彻底粉碎。

### 3.2 🕒 时光机与数据优化

* **智能去重**：点击 `🧹 去重` 按钮，系统会自动扫描数据库并删除内容完全重复的冗余记录，仅保留最新一条。
* **快速恢复**：支持勾选“双击直接恢复”，无需确认弹窗即可覆盖主视图内容。

### 3.3 ☁️ 服务器同步 (SSH/SCP)

针对多设备用户，可通过 `⚙️ 设置 -> 服务器同步` 配置：

* 支持通过 SSH 协议将本地 `safedraft.db` 上传至 Linux 服务器。
* 支持从服务器拉取覆盖本地，实现异地办公的数据同步。
* **注意**：需提前配置 SSH 免密登录（公钥授权）。

### 3.4 智能感知逻辑

系统通过 `WindowWatcher` 模块监控前台窗口：

* **匹配规则**：支持“应用进程名”和“窗口标题关键词”两种模式。
* **防干扰机制**：当用户切换到 SafeDraft 自身窗口进行操作时，监控器会锁定状态，确保切回原应用时不会因重复触发而打断思路。

## 4. 快捷键指南 (基于源码实现)

| 功能 | 快捷键 | 备注 |
| --- | --- | --- |
| **快速唤起/隐藏** | `Ctrl + ~` | 全局有效，若失效请尝试管理员身份运行 |
| **创建快照** | `Ctrl + S` | 在 SafeDraft 窗口内，单独保存副本而不中断输入 |
| **强制保存** | `Ctrl + S` | 在笔记系统内，触发立即保存 |

## 5. 存储安全

* **本地存储**：数据保存在 `safedraft.db` (SQLite)。
* **自动分块**：系统默认以 10 分钟为间隔自动切割记录，防止单一条目过大。

---

**SafeDraft** - *Secure your input, capture your inspiration.*