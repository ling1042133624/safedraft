# SafeDraft: 输入安全卫士与中转站 - 原始需求与设计文档

## 1. 项目背景与核心痛点 (Problem Statement)

### 1.1 现状描述
用户在进行高强度的文字产出工作时（如与 AI 进行长对话、在办公软件撰写文档），经常遭遇以下情况：
*   从开始构思到完成输入，耗时较长。
*   在点击“发送”或“保存”的瞬间，目标应用（浏览器、AI 客户端、Word 等）发生崩溃、闪退或无响应。
*   **后果**：辛苦输入的文字瞬间丢失，无法找回。

### 1.2 用户心理与目标
*   **心理状态**：对软件稳定性的极度不信任，输入过程伴随强烈的焦虑感。
*   **核心诉求**：需要一个**“后悔药”**或**“黑匣子”**。无论发生什么系统级灾难，我刚才敲击键盘输入的内容必须存在于某个地方，且随时可查。

---

## 2. 产品定义与核心理念 (Core Concept)

### 2.1 产品定位
一个**无感知、可记忆、可回溯**的文字输入中转站与记录器。它不试图替代原有的办公软件，而是作为“最安全的草稿纸”和“系统级输入挂件”存在。

### 2.2 核心哲学
*   **无感知 (Unconscious)**：记录过程不需要用户手动点击保存，像呼吸一样自然发生。
*   **键盘记录器 (Keylogger-like)**：虽然不是病毒，但功能上要达到记录每一个思维片段的效果。
*   **中转站 (The Bridge)**：先在这里写，写完再分发出去。

---

## 3. 详细功能需求 (Functional Requirements)

### 3.1 数据记录与存储机制
*   **无感存储**：只要用户在打字，系统就必须在后台实时保存（毫秒级）。
*   **本地化存储**：数据应存储在本地（如 SQLite 逻辑），确保断网可用，且不受浏览器缓存清理影响。
*   **时间分块逻辑 (Time-block Segmentation)**：
    *   **逻辑**：按时间间隔自动切分内容块。
    *   **阈值**：**10分钟**。
    *   **行为**：如果用户停止输入超过 10 分钟，再次输入时，不应覆盖上一条记录，而是自动创建一个新的记录条目。方便用户回溯不同时间段的思维片段。

### 3.2 理想交互流程 (Ideal Interaction Flow - 原始构想)
*   **触发机制**：
    *   用户可在设置中**勾选**特定的桌面应用（如 Word、微信）或**网址**（如 ChatGPT、Claude）。
    *   当系统检测到用户打开了上述应用或访问了上述网址时，SafeDraft 自动激活。
*   **窗口行为**：
    *   **自动弹出**：SafeDraft 自动弹出到桌面的**左上角偏下一点**的位置（不紧贴屏幕边缘）。
    *   **临时置顶**：窗口自动设置为**“最前置窗口” (Always on Top)**。
    *   **倒计时机制**：置顶状态保持 **2分钟**。2分钟后，自动取消置顶，避免遮挡视线。
    *   **手动干预**：界面需提供一个显眼按钮，允许用户手动强制保持/取消“最前置窗口”状态。

### 3.3 历史回溯 ("时光机")
*   当发生崩溃时，用户打开 SafeDraft，可以清晰地看到之前的所有输入记录。
*   记录应按时间倒序排列，支持一键复制恢复。

---

## 4. 界面与体验设计 (UI/UX Design)

### 4.1 视觉风格
*   **极简主义**：去除所有干扰元素，只保留输入框和核心功能键。
*   **深色模式**：默认采用暗色调，符合极客/沉浸式输入习惯，减少屏幕刺眼。

### 4.2 关键功能区
1.  **主输入区**：巨大的文本框，支持 Markdown。
2.  **悬浮控制区**：
    *   “锁定置顶”按钮。
    *   “复制并关闭”按钮。
3.  **历史时间轴**：点击可展开的时间线视图，查看过去的“10分钟分块”记录。


---

## 6. 总结
本软件存在的唯一目的，就是消除“打字一小时，崩溃全白忙”的焦虑。它是一个为了数据安全而生的输入保险箱。